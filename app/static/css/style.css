/* ============================================
   Scholaverse - Pixel Art RPG Stylesheet
   ============================================ */

/* --- Pixel Border Utility ---
   Creates a stepped-corner pixel art border using box-shadow.
   Apply to any element for the classic RPG panel look. */
.pixel-border {
  position: relative;
  border: 4px solid #d4a847;
  box-shadow:
    /* outer stepped corners */
    -4px 0 0 0 #d4a847,
     4px 0 0 0 #d4a847,
     0 -4px 0 0 #d4a847,
     0  4px 0 0 #d4a847,
    /* inner shadow for depth */
    inset 0 0 0 2px rgba(0, 0, 0, 0.3);
  image-rendering: pixelated;
}

/* --- Pixel Panel ---
   Dark green panel with gold pixel border, used for content sections. */
.pixel-panel {
  position: relative;
  background: linear-gradient(to bottom, rgba(255, 255, 255, 0.04) 0%, transparent 55%), #2d3a1a;
  border: 4px solid #d4a847;
  padding: 1.25rem;
  box-shadow:
    -4px 0 0 0 #d4a847,
     4px 0 0 0 #d4a847,
     0 -4px 0 0 #d4a847,
     0  4px 0 0 #d4a847,
    /* double border step */
    -8px 0 0 0 #8b6914,
     8px 0 0 0 #8b6914,
     0 -8px 0 0 #8b6914,
     0  8px 0 0 #8b6914,
    /* inner depth + subtle top highlight */
    inset 0 0 0 2px rgba(0, 0, 0, 0.4),
    inset 0 0 18px rgba(0, 0, 0, 0.35),
    inset 0 2px 0 0 rgba(255, 255, 255, 0.05);
}

/* Panel corner ornaments (pseudo-elements) â€” top-left and top-right */
.pixel-panel::before,
.pixel-panel::after {
  content: "";
  position: absolute;
  width: 14px;
  height: 14px;
  background: linear-gradient(135deg, #f0c060 0%, #d4a847 100%);
  box-shadow: 0 0 0 2px #8b6914, inset 0 0 0 2px rgba(255, 255, 255, 0.2);
  z-index: 1;
}
.pixel-panel::before {
  top: -8px;
  left: -8px;
}
.pixel-panel::after {
  top: -8px;
  right: -8px;
}

/* Bottom corner ornaments via a positioned child element:
   <div class="pixel-corners-bottom" aria-hidden="true"></div> */
.pixel-corners-bottom {
  position: absolute;
  inset: 0;
  pointer-events: none;
}
.pixel-corners-bottom::before,
.pixel-corners-bottom::after {
  content: "";
  position: absolute;
  width: 14px;
  height: 14px;
  background: linear-gradient(135deg, #f0c060 0%, #d4a847 100%);
  box-shadow: 0 0 0 2px #8b6914, inset 0 0 0 2px rgba(255, 255, 255, 0.2);
  z-index: 1;
}
.pixel-corners-bottom::before {
  bottom: -8px;
  left: -8px;
}
.pixel-corners-bottom::after {
  bottom: -8px;
  right: -8px;
}

/* --- Pixel Button ---
   RPG-style button with raised/pressed states. */
.pixel-btn {
  display: inline-block;
  position: relative;
  padding: 0.625rem 1.25rem;
  background-color: #2d3a1a;
  color: #e8d5b0;
  border: 3px solid #d4a847;
  font-family: "Noto Sans TC", sans-serif;
  font-size: 0.875rem;
  font-weight: 600;
  cursor: pointer;
  text-decoration: none;
  text-align: center;
  transition: transform 0.05s, box-shadow 0.05s;
  box-shadow:
    -3px 0 0 0 #d4a847,
     3px 0 0 0 #d4a847,
     0 -3px 0 0 #d4a847,
     0  3px 0 0 #d4a847,
     0  4px 0 0 #8b6914,
     0  5px 0 0 #8b6914;
}
.pixel-btn:hover {
  background-color: #3a4a24;
  color: #fff;
  box-shadow:
    -3px 0 0 0 #d4a847,
     3px 0 0 0 #d4a847,
     0 -3px 0 0 #d4a847,
     0  3px 0 0 #d4a847,
     0  4px 0 0 #8b6914;
  transform: translateY(1px);
}
.pixel-btn:active {
  transform: translateY(4px);
  box-shadow:
    -3px 0 0 0 #d4a847,
     3px 0 0 0 #d4a847,
     0 -3px 0 0 #d4a847,
     0  3px 0 0 #d4a847;
}

/* --- Small Button Variant --- */
.pixel-btn-sm {
  display: inline-block;
  padding: 0.375rem 0.75rem;
  background-color: #2d3a1a;
  color: #e8d5b0;
  border: 2px solid #d4a847;
  font-family: "Noto Sans TC", sans-serif;
  font-size: 0.75rem;
  font-weight: 600;
  cursor: pointer;
  text-decoration: none;
  text-align: center;
  transition: transform 0.05s, box-shadow 0.05s;
  box-shadow:
    -2px 0 0 0 #d4a847,
     2px 0 0 0 #d4a847,
     0 -2px 0 0 #d4a847,
     0  2px 0 0 #d4a847,
     0  3px 0 0 #8b6914;
}
.pixel-btn-sm:hover {
  background-color: #3a4a24;
  color: #fff;
  transform: translateY(1px);
  box-shadow:
    -2px 0 0 0 #d4a847,
     2px 0 0 0 #d4a847,
     0 -2px 0 0 #d4a847,
     0  2px 0 0 #d4a847;
}

/* --- Gold Button Variant --- */
.pixel-btn-gold {
  background-color: #8b6914;
  color: #1a1a2e;
  font-weight: 700;
  border-color: #ffd700;
  box-shadow:
    -3px 0 0 0 #ffd700,
     3px 0 0 0 #ffd700,
     0 -3px 0 0 #ffd700,
     0  3px 0 0 #ffd700,
     0  4px 0 0 #d4a847,
     0  5px 0 0 #d4a847;
}
.pixel-btn-gold:hover {
  background-color: #a07a18;
  color: #1a1a2e;
  box-shadow:
    -3px 0 0 0 #ffd700,
     3px 0 0 0 #ffd700,
     0 -3px 0 0 #ffd700,
     0  3px 0 0 #ffd700,
     0  4px 0 0 #d4a847;
  transform: translateY(1px);
}
.pixel-btn-gold:active {
  background-color: #c09020;
  transform: translateY(4px);
  box-shadow:
    -3px 0 0 0 #ffd700,
     3px 0 0 0 #ffd700,
     0 -3px 0 0 #ffd700,
     0  3px 0 0 #ffd700,
    inset 0 0 8px rgba(255, 215, 0, 0.3);
}

/* --- Card Frame Styles --- */
.card-frame {
  position: relative;
  border: 4px solid;
  padding: 4px;
  background-color: #1e1e2e;
  transition: transform 0.2s, box-shadow 0.2s;
}
/* Subtle diagonal stripe texture overlay on all card frames */
.card-frame::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: repeating-linear-gradient(
    -45deg,
    transparent,
    transparent 6px,
    rgba(255, 255, 255, 0.015) 6px,
    rgba(255, 255, 255, 0.015) 7px
  );
  z-index: 0;
}
.card-frame:hover {
  transform: translateY(-4px);
}

.card-frame-copper {
  border-color: #b87333;
  box-shadow:
    -4px 0 0 0 #b87333,
     4px 0 0 0 #b87333,
     0 -4px 0 0 #b87333,
     0  4px 0 0 #b87333,
    -8px 0 0 0 #8b5523,
     8px 0 0 0 #8b5523,
     0 -8px 0 0 #8b5523,
     0  8px 0 0 #8b5523,
    inset 0 0 8px rgba(184, 115, 51, 0.3);
}

.card-frame-silver {
  border-color: #c0c0c0;
  box-shadow:
    -4px 0 0 0 #c0c0c0,
     4px 0 0 0 #c0c0c0,
     0 -4px 0 0 #c0c0c0,
     0  4px 0 0 #c0c0c0,
    -8px 0 0 0 #909090,
     8px 0 0 0 #909090,
     0 -8px 0 0 #909090,
     0  8px 0 0 #909090,
    inset 0 0 8px rgba(192, 192, 192, 0.3);
}

.card-frame-gold {
  border-color: #ffd700;
  box-shadow:
    -4px 0 0 0 #ffd700,
     4px 0 0 0 #ffd700,
     0 -4px 0 0 #ffd700,
     0  4px 0 0 #ffd700,
    -8px 0 0 0 #d4a847,
     8px 0 0 0 #d4a847,
     0 -8px 0 0 #d4a847,
     0  8px 0 0 #d4a847,
    inset 0 0 8px rgba(255, 215, 0, 0.3);
}

/* Gold card hover: pulsing glow animation */
@keyframes gold-card-glow {
  0%, 100% {
    transform: translateY(-4px);
    box-shadow:
      -4px 0 0 0 #ffd700,
       4px 0 0 0 #ffd700,
       0 -4px 0 0 #ffd700,
       0  4px 0 0 #ffd700,
      -8px 0 0 0 #d4a847,
       8px 0 0 0 #d4a847,
       0 -8px 0 0 #d4a847,
       0  8px 0 0 #d4a847,
      inset 0 0 8px rgba(255, 215, 0, 0.3),
      0 0 10px rgba(255, 215, 0, 0.25);
  }
  50% {
    transform: translateY(-4px);
    box-shadow:
      -4px 0 0 0 #ffd700,
       4px 0 0 0 #ffd700,
       0 -4px 0 0 #ffd700,
       0  4px 0 0 #ffd700,
      -8px 0 0 0 #d4a847,
       8px 0 0 0 #d4a847,
       0 -8px 0 0 #d4a847,
       0  8px 0 0 #d4a847,
      inset 0 0 14px rgba(255, 215, 0, 0.5),
      0 0 24px rgba(255, 215, 0, 0.5),
      0 0 48px rgba(212, 168, 71, 0.2);
  }
}
.card-frame-gold:hover {
  animation: gold-card-glow 1.8s ease-in-out infinite;
  transition: none;
}

/* --- Pixel Title --- */
.pixel-title {
  font-family: "Press Start 2P", monospace;
  color: #d4a847;
  text-shadow:
    2px 2px 0 #8b6914,
    4px 4px 0 rgba(0, 0, 0, 0.4);
  letter-spacing: 0.05em;
}

/* --- RPG Progress Bar --- */
.rpg-progress-bar {
  position: relative;
  height: 20px;
  background-color: #1a1a2e;
  border: 3px solid #8b6914;
  box-shadow:
    -3px 0 0 0 #8b6914,
     3px 0 0 0 #8b6914,
     0 -3px 0 0 #8b6914,
     0  3px 0 0 #8b6914,
    inset 0 0 4px rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.rpg-progress-bar .bar-fill {
  height: 100%;
  background: linear-gradient(180deg, #4ade80 0%, #22c55e 50%, #16a34a 100%);
  transition: width 0.5s ease;
  image-rendering: pixelated;
  box-shadow: inset 0 -2px 0 rgba(0, 0, 0, 0.2);
}

.rpg-progress-bar .bar-fill.bar-warning {
  background: linear-gradient(180deg, #fbbf24 0%, #f59e0b 50%, #d97706 100%);
}

.rpg-progress-bar .bar-fill.bar-danger {
  background: linear-gradient(180deg, #f87171 0%, #ef4444 50%, #dc2626 100%);
}

.rpg-progress-bar .bar-fill.bar-locked {
  background: linear-gradient(180deg, #6b7280 0%, #4b5563 50%, #374151 100%);
}

/* --- Gold Shimmer Animation --- */
@keyframes pixel-shimmer {
  0%   { opacity: 1; }
  50%  { opacity: 0.7; }
  100% { opacity: 1; }
}
.pixel-shimmer {
  animation: pixel-shimmer 2s ease-in-out infinite;
}

@keyframes gold-pulse {
  0%   { text-shadow: 2px 2px 0 #8b6914, 4px 4px 0 rgba(0,0,0,0.4); }
  50%  { text-shadow: 2px 2px 0 #8b6914, 4px 4px 0 rgba(0,0,0,0.4), 0 0 8px rgba(212,168,71,0.4); }
  100% { text-shadow: 2px 2px 0 #8b6914, 4px 4px 0 rgba(0,0,0,0.4); }
}
.gold-pulse {
  animation: gold-pulse 3s ease-in-out infinite;
}

/* --- Pixel Scrollbar --- */
::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}
::-webkit-scrollbar-track {
  background: #1a1a2e;
  border: 2px solid #8b6914;
}
::-webkit-scrollbar-thumb {
  background: #2d3a1a;
  border: 2px solid #d4a847;
}
::-webkit-scrollbar-thumb:hover {
  background: #3a4a24;
}
::-webkit-scrollbar-corner {
  background: #1a1a2e;
}

/* --- Nav Styles --- */
/* Nav bar: gold bottom border + subtle glow */
.nav-bar {
  box-shadow:
    0 4px 0 0 #8b6914,
    0 6px 16px 0 rgba(212, 168, 71, 0.18);
}

.nav-link {
  position: relative;
  padding: 0.375rem 0.75rem;
  color: #a89070;
  font-family: "Noto Sans TC", sans-serif;
  font-weight: 600;
  font-size: 0.875rem;
  text-decoration: none;
  border: 2px solid transparent;
  transition: color 0.15s, border-color 0.15s, background-color 0.15s, box-shadow 0.15s;
}
.nav-link:hover {
  color: #d4a847;
  border-color: #d4a847;
  box-shadow:
    -2px 0 0 0 #d4a847,
     2px 0 0 0 #d4a847,
     0 -2px 0 0 #d4a847,
     0  2px 0 0 #d4a847;
}
/* Active nav link: more visually distinct with background glow */
.nav-link.active {
  color: #ffd700;
  border-color: #ffd700;
  background-color: rgba(212, 168, 71, 0.12);
  text-shadow: 0 0 8px rgba(255, 215, 0, 0.4);
  box-shadow:
    -2px 0 0 0 #ffd700,
     2px 0 0 0 #ffd700,
     0 -2px 0 0 #ffd700,
     0  2px 0 0 #ffd700,
    inset 0 0 10px rgba(212, 168, 71, 0.1);
}

/* --- Token Badge --- */
.token-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.25rem 0.625rem;
  background-color: #2d3a1a;
  border: 2px solid #d4a847;
  color: #ffd700;
  font-family: monospace;
  font-size: 0.875rem;
  font-weight: 700;
  box-shadow:
    -2px 0 0 0 #d4a847,
     2px 0 0 0 #d4a847,
     0 -2px 0 0 #d4a847,
     0  2px 0 0 #d4a847;
}

/* --- Toast Notifications --- */
.toast-container {
  position: fixed;
  top: 1rem;
  right: 1rem;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  pointer-events: none;
}

.toast {
  pointer-events: auto;
  padding: 0.75rem 1rem;
  background-color: #2d3a1a;
  color: #e8d5b0;
  border: 3px solid #d4a847;
  font-family: "Noto Sans TC", sans-serif;
  font-size: 0.875rem;
  max-width: 360px;
  box-shadow:
    -3px 0 0 0 #d4a847,
     3px 0 0 0 #d4a847,
     0 -3px 0 0 #d4a847,
     0  3px 0 0 #d4a847,
     4px 4px 0 rgba(0, 0, 0, 0.4);
  opacity: 0;
  transform: translateX(100%);
  transition: opacity 0.3s, transform 0.3s;
}
.toast.show {
  opacity: 1;
  transform: translateX(0);
}
.toast.toast-success { border-color: #4ade80; }
.toast.toast-warning { border-color: #f59e0b; }
.toast.toast-danger  { border-color: #ef4444; }

/* --- Utility: Locked overlay --- */
.locked-overlay {
  position: relative;
}
.locked-overlay::after {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* --- Horizontal scroll for mobile card gallery --- */
.card-scroll {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scroll-snap-type: x mandatory;
  scrollbar-width: thin;
}
.card-scroll > * {
  scroll-snap-align: start;
  flex-shrink: 0;
}

/* --- RPG Pixel Divider ---
   Decorative horizontal divider with gold line and diamond center ornament.
   Usage: <div class="pixel-divider" aria-hidden="true"></div> */
.pixel-divider {
  position: relative;
  height: 2px;
  background: linear-gradient(
    to right,
    transparent 0%,
    #8b6914 15%,
    #d4a847 30%,
    #ffd700 50%,
    #d4a847 70%,
    #8b6914 85%,
    transparent 100%
  );
  margin: 1.5rem 0;
}
/* Diamond ornament in the center */
.pixel-divider::before {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) rotate(45deg);
  width: 10px;
  height: 10px;
  background: linear-gradient(135deg, #f0c060 0%, #d4a847 100%);
  /* outer ring, gap (background color), inner ring */
  box-shadow:
    0 0 0 2px #8b6914,
    0 0 0 4px #1a1a2e,
    0 0 0 5px #8b6914;
}

/* --- Scanline CRT Overlay ---
   Apply to body for a subtle retro monitor feel.
   Usage: add class "pixel-scanlines" to <body> */
.pixel-scanlines::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.03) 2px,
    rgba(0, 0, 0, 0.03) 4px
  );
  z-index: 9998;
}
